<div class='track'>
    <div class="modal fade" [id]="'generationModal' + trackNumber" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Configure generation</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                     <form #generationForm="ngForm">
                        What would you like to generate?
                        <label class="custom-radio-button">
                            <input [(ngModel)]="generationType" type="radio" value="melody" name="generationType">A melody
                            <span class="radio"></span>
                        </label>

                        <label class="custom-radio-button">A chord progression
                            <input [(ngModel)]="generationType" type="radio" value="chords" name="generationType">
                            <span class="radio"></span>
                        </label>
                        <hr/>
                        <label class='custom-checkbox'>Only generate notes within {{ configDataService.key }} {{ configDataService.scale.name }}
                            <input [(ngModel)]="conformToKeyScale" type="checkbox" name="conformToKeyScale">
                            <span class="checkmark"></span>
                        </label>
                        <label class='custom-checkbox' style='display:inline-block;margin-right:15px;'>
                            Only generate notes in octave
                            <input [(ngModel)]="octaveConstraintCheck" type="checkbox" name="octaveConstraintCheck">
                            <span class="checkmark"></span>
                        </label>
                        <input class='form-control' style='width:70px' [(ngModel)]="octaveConstraint" type="number" name="octaveConstraint">
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-light" data-dismiss="modal">Close</button>
                    <button type="button" (click)="generate(generationForm.value)" class="btn btn-success" data-dismiss="modal">Generate</button>
                </div>
            </div>
        </div>
    </div>

    <div class='row'>
        <div class='col-1'>
            <span class='track-number'>{{ trackNumber + 1 }}</span>
        </div>

        <div class="col region-preview" (click)="togglePianoRollOpen()">
            <div class='col note-grid'>
                <ul class='note-rows'>
                    <li *ngFor="let note of gridState"
                        class="{{ note.color }} {{ note.note }}" attr.data-octave="{{ note.octave }}">
                        <label class="grid-state-wrapper"
                            *ngFor="let state of note.timeStates; let index= index;"
                            [style.width]="configDataService.stateWidth"
                            attr.data-active="{{ note.timeStates[index] }}"
                            [attr.id]="note.id"
                            [attr.data-step]="index"
                            >
                            <input class='grid-state' type='checkbox'
                                attr.data-active="{{ state }}"
                                [(ngModel)]="note.timeStates[index]"
                                disabled
                                >
                        </label>
                    </li>
                </ul>
             </div>
        </div>

        <div class='col-1'>
            <button class="delete-track-button" id="clear-button" (click)="deleteTrack()">
                <span class='glyphicon glyphicon-remove'></span>
            </button>
        </div>

    </div>
</div>
